<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Paslios - Saha Rezervasyonu">
    <link href="output.css" rel="stylesheet">
    <title>Paslios - Saha Rezervasyonu</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: #f9fafb;
        min-height: 100vh;
        max-width: 400px;
        margin: 0 auto;
        width: 100%;
        padding-bottom: 80px;
      }
      
      .header {
        background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
        padding: 3rem 1rem 2rem 1rem;
        width: 100vw;
        margin-left: calc(-50vw + 50%);
      }
      
      .header-container {
        max-width: 400px;
        margin: 0 auto;
        width: 100%;
      }
      
      .nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
      }
      
      .back-btn {
        width: 2.5rem;
        height: 2.5rem;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        transition: all 0.2s;
      }
      
      .back-btn:hover {
        background: rgba(255, 255, 255, 0.3);
      }
      
      .nav-center h1 {
        color: white;
        font-size: 1.25rem;
        font-weight: bold;
        text-align: center;
      }
      
      .nav-right {
        width: 2.5rem;
      }
      
      .main-content {
        flex: 1;
        max-width: 400px;
        margin: 0 auto;
        width: 100%;
        padding: 1.5rem 1rem;
      }
      
      .map-container {
        background: white;
        border-radius: 16px;
        padding: 1rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #f3f4f6;
      }
      
      .map-container-interactive {
        background: white;
        border-radius: 16px;
        padding: 1rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #f3f4f6;
        position: relative;
        cursor: pointer;
      }
      
      .map-placeholder {
        background: linear-gradient(135deg, #e5e7eb, #d1d5db);
        border-radius: 12px;
        height: 200px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: #6b7280;
        position: relative;
      }
      
      .map-pins {
        position: absolute;
        top: 1rem;
        left: 1rem;
        right: 1rem;
        bottom: 1rem;
        background: linear-gradient(135deg, #dcfce7, #bbf7d0);
        border-radius: 12px;
        z-index: 10;
      }
      
      .map-pin {
        position: absolute;
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 20;
      }
      
      .map-pin:hover {
        transform: scale(1.1);
      }
      
      .pin-icon {
        font-size: 24px;
        color: #ef4444;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
      }
      
      .pin-label {
        background: white;
        padding: 2px 6px;
        border-radius: 12px;
        font-size: 10px;
        font-weight: 600;
        color: #374151;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        margin-top: 2px;
      }
      
      .map-icon {
        font-size: 3rem;
        margin-bottom: 0.5rem;
      }
      
      .map-text {
        font-size: 0.875rem;
        font-weight: 500;
      }
      
      .location-info {
        margin-top: 1rem;
        padding: 0.75rem;
        background: #f9fafb;
        border-radius: 12px;
      }
      
      .current-location {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #1f2937;
        font-size: 0.875rem;
        font-weight: 500;
      }
      
      .filter-section {
        background: white;
        border-radius: 16px;
        padding: 1rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #f3f4f6;
      }
      
      .section-title {
        color: #1f2937;
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }
      
      .filter-group {
        margin-bottom: 1rem;
      }
      
      .filter-label {
        color: #6b7280;
        font-size: 0.875rem;
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
      }
      
      .date-time-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
      }
      
      .filter-input {
        width: 100%;
        padding: 0.75rem;
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        font-size: 0.875rem;
        color: #1f2937;
        transition: all 0.2s;
      }
      
      .filter-input:focus {
        outline: none;
        background: white;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }
      
      .player-count {
        display: flex;
        align-items: center;
        gap: 1rem;
      }
      
      .count-btn {
        width: 2.5rem;
        height: 2.5rem;
        background: #f3f4f6;
        border: none;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.125rem;
        font-weight: bold;
        color: #6b7280;
        transition: all 0.2s;
      }
      
      .count-btn:hover {
        background: #e5e7eb;
        color: #1f2937;
      }
      
      .count-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      
      .count-display {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 0.75rem;
        text-align: center;
        font-weight: 600;
        color: #1f2937;
        min-width: 4rem;
      }
      
      .venue-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      
      .venue-card {
        background: white;
        border-radius: 16px;
        padding: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #f3f4f6;
        transition: all 0.2s;
        cursor: pointer;
      }
      
      .venue-card:hover {
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }
      
      .venue-card.selected {
        border-color: #3b82f6;
        background: #fafbff;
      }
      
      .venue-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 0.75rem;
      }
      
      .venue-image {
        width: 4rem;
        height: 3rem;
        background: linear-gradient(135deg, #10b981, #059669);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }
      
      .venue-info {
        flex: 1;
      }
      
      .venue-name {
        color: #1f2937;
        font-weight: 600;
        margin-bottom: 0.25rem;
      }
      
      .venue-location {
        color: #6b7280;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }
      
      .venue-details {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 1rem;
        margin-bottom: 0.75rem;
        padding: 0.75rem;
        background: #f9fafb;
        border-radius: 12px;
      }
      
      .detail-item {
        text-align: center;
      }
      
      .detail-label {
        color: #6b7280;
        font-size: 0.75rem;
        margin-bottom: 0.25rem;
      }
      
      .detail-value {
        color: #1f2937;
        font-weight: 600;
        font-size: 0.875rem;
      }
      
      .available-slots {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }
      
      .slot-btn {
        background: #f3f4f6;
        color: #6b7280;
        padding: 0.5rem 0.75rem;
        border-radius: 8px;
        font-size: 0.75rem;
        font-weight: 500;
        border: none;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .slot-btn.available {
        background: #dcfce7;
        color: #16a34a;
      }
      
      .slot-btn.available:hover {
        background: #bbf7d0;
      }
      
      .slot-btn.selected {
        background: #3b82f6;
        color: white;
      }
      
      .slot-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      
      .booking-summary {
        background: white;
        border-radius: 16px;
        padding: 1rem;
        margin-bottom: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #f3f4f6;
        display: none;
      }
      
      .booking-summary.active {
        display: block;
      }
      
      .summary-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
      }
      
      .summary-item:last-child {
        margin-bottom: 0;
        padding-top: 0.75rem;
        border-top: 1px solid #f3f4f6;
        font-weight: 600;
      }
      
      .summary-label {
        color: #6b7280;
        font-size: 0.875rem;
      }
      
      .summary-value {
        color: #1f2937;
        font-size: 0.875rem;
        font-weight: 500;
      }
      
      .book-btn {
        width: 100%;
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        font-weight: 600;
        padding: 1rem;
        border-radius: 16px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        border: none;
        margin-bottom: 5rem;
      }
      
      .book-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
      }
      
      .book-btn:disabled {
        background: #6b7280;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }
      
      /* Venue Detail Popup */
      .venue-popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }
      
      .venue-popup {
        background: white;
        border-radius: 20px;
        max-width: 350px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        animation: slideUp 0.3s ease;
      }
      
      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .popup-header {
        position: relative;
        height: 150px;
        background: linear-gradient(135deg, #22c55e, #16a34a);
        border-radius: 20px 20px 0 0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
      }
      
      .popup-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .venue-icon {
        font-size: 48px;
      }
      
      .popup-content {
        padding: 20px;
      }
      
      .venue-name {
        font-size: 20px;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 8px;
      }
      
      .venue-address {
        color: #6b7280;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      
      .rating-section {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
        padding: 16px;
        background: #f9fafb;
        border-radius: 12px;
      }
      
      .star-rating {
        display: flex;
        gap: 2px;
      }
      
      .star {
        color: #fbbf24;
        font-size: 18px;
      }
      
      .star.empty {
        color: #e5e7eb;
      }
      
      .rating-text {
        font-weight: 600;
        color: #1f2937;
      }
      
      .rating-count {
        color: #6b7280;
        font-size: 14px;
      }
      
      .venue-features {
        margin-bottom: 20px;
      }
      
      .features-title {
        font-size: 16px;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 12px;
      }
      
      .features-list {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      
      .feature-tag {
        padding: 6px 12px;
        background: #dcfce7;
        color: #166534;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
      }
      
      .price-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        background: #f0fdf4;
        border-radius: 12px;
        margin-bottom: 20px;
      }
      
      .price-label {
        color: #374151;
        font-weight: 500;
      }
      
      .price-value {
        font-size: 18px;
        font-weight: 700;
        color: #22c55e;
      }
      
      .popup-actions {
        display: flex;
        gap: 12px;
      }
      
      .action-btn {
        flex: 1;
        padding: 14px;
        border: none;
        border-radius: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .btn-secondary {
        background: #f3f4f6;
        color: #374151;
      }
      
      .btn-secondary:hover {
        background: #e5e7eb;
      }
      
      .btn-primary {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        color: white;
      }
      
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(34, 197, 94, 0.4);
      }
      
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        border-top: 1px solid #f3f4f6;
        padding: 1rem;
        box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.05);
        z-index: 1000;
      }
      
      body {
        padding-bottom: 80px;
      }
      
      .nav-items {
        display: flex;
        justify-content: space-around;
        max-width: 400px;
        margin: 0 auto;
      }
      
      .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-decoration: none;
        transition: all 0.2s;
      }
      
      .nav-item.active {
        color: #3b82f6;
      }
      
      .nav-item:not(.active) {
        color: #6b7280;
      }
      
      .nav-item:hover {
        color: #3b82f6;
      }
      
      .nav-item span:first-child {
        font-size: 1.25rem;
        margin-bottom: 0.25rem;
      }
      
      .nav-item span:last-child {
        font-size: 0.75rem;
        font-weight: 500;
      }

      /* Toast Notification Styles */
      .toast {
        position: fixed;
        bottom: 120px;
        left: 50%;
        transform: translateX(-50%);
        background: #1f2937;
        color: white;
        padding: 0.75rem 1.25rem;
        border-radius: 12px;
        font-size: 0.875rem;
        font-weight: 500;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        z-index: 10000;
        opacity: 0;
        transition: all 0.3s ease;
        max-width: 320px;
        text-align: center;
      }

      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(-10px);
      }

      .toast.success {
        background: #10b981;
      }

      .toast.error {
        background: #ef4444;
      }

      .toast.info {
        background: #3b82f6;
      }

      .toast.warning {
        background: #f59e0b;
      }

      /* Modal Styles */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .modal-overlay.show {
        opacity: 1;
        visibility: visible;
      }

      .booking-modal {
        background: white;
        border-radius: 16px;
        padding: 1.5rem;
        max-width: 350px;
        width: 90%;
        margin: 1rem;
        transform: scale(0.9);
        transition: transform 0.3s ease;
        max-height: 80vh;
        overflow-y: auto;
      }

      .modal-overlay.show .booking-modal {
        transform: scale(1);
      }

      .modal-title {
        font-size: 1.25rem;
        font-weight: bold;
        color: #1f2937;
        margin-bottom: 1rem;
        text-align: center;
      }

      .booking-summary {
        background: #f9fafb;
        border-radius: 12px;
        padding: 1rem;
        margin-bottom: 1.5rem;
      }

      .summary-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
      }

      .summary-item:last-child {
        margin-bottom: 0;
        font-weight: bold;
        border-top: 1px solid #e5e7eb;
        padding-top: 0.5rem;
        margin-top: 0.5rem;
      }

      .modal-buttons {
        display: flex;
        gap: 0.75rem;
        justify-content: center;
      }

      .modal-btn {
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-size: 0.875rem;
        font-weight: 500;
        border: none;
        cursor: pointer;
        transition: all 0.2s;
        min-width: 100px;
      }

      .modal-btn.primary {
        background: #10b981;
        color: white;
      }

      .modal-btn.primary:hover {
        background: #059669;
      }

      .modal-btn.secondary {
        background: #f3f4f6;
        color: #374151;
      }

      .modal-btn.secondary:hover {
        background: #e5e7eb;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <div class="header">
      <div class="header-container">
        <!-- Navigation -->
        <div class="nav">
          <a href="home.html" class="back-btn">
            <span style="color: white; font-size: 1.125rem;">←</span>
          </a>
          <div class="nav-center">
            <h1>Saha Rezervasyonu</h1>
          </div>
          <div class="nav-right"></div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Map Section -->
      <div class="map-container">
        <div class="section-title">Yakındaki Sahalar</div>
        <div class="map-container-interactive" onclick="initMap()">
          <div class="map-placeholder">
            <div class="map-icon">🗺️</div>
            <div class="map-text">Haritayı açmak için tıklayın</div>
          </div>
          
          <!-- Interactive Map Pins -->
          <div class="map-pins" id="mapPins" style="display: none;">
            <div class="map-pin" style="top: 30%; left: 25%;" onclick="showVenueDetails('venue1', event)">
              <span class="pin-icon">📍</span>
              <span class="pin-label">Spor A</span>
            </div>
            <div class="map-pin" style="top: 60%; left: 70%;" onclick="showVenueDetails('venue2', event)">
              <span class="pin-icon">📍</span>
              <span class="pin-label">Champions</span>
            </div>
            <div class="map-pin" style="top: 80%; left: 40%;" onclick="showVenueDetails('venue3', event)">
              <span class="pin-icon">📍</span>
              <span class="pin-label">Elite FC</span>
            </div>
          </div>
        </div>
        <div class="location-info">
          <div class="current-location">
            <span>📍</span>
            <span>Mevcut konumunuz: Çankaya, Ankara</span>
          </div>
        </div>
      </div>

      <!-- Filter Section -->
      <div class="filter-section">
        <div class="section-title">Rezervasyon Detayları</div>
        
        <div class="filter-group">
          <label class="filter-label">Tarih ve Saat</label>
          <div class="date-time-row">
            <input type="date" class="filter-input" id="booking-date" value="2025-09-17">
            <input type="time" class="filter-input" id="booking-time" value="19:00">
          </div>
        </div>

        <div class="filter-group">
          <label class="filter-label">Oyuncu Sayısı</label>
          <div class="player-count">
            <button class="count-btn" onclick="changePlayerCount(-1)" id="decrease-btn">-</button>
            <div class="count-display" id="player-count">10</div>
            <button class="count-btn" onclick="changePlayerCount(1)" id="increase-btn">+</button>
          </div>
        </div>
      </div>

      <!-- Venue List -->
      <div class="venue-list">
        <div class="venue-card" onclick="selectVenue(this, 'Spor A Halısaha', 150)">
          <div class="venue-header">
            <div class="venue-image">
              <span style="color: white; font-size: 1.5rem;">🏟️</span>
            </div>
            <div class="venue-info">
              <div class="venue-name">Spor A Halısaha</div>
              <div class="venue-location">
                <span>📍</span>
                <span>Çankaya, Ankara (1.2 km)</span>
              </div>
            </div>
          </div>
          <div class="venue-details">
            <div class="detail-item">
              <div class="detail-label">Ücret/Saat</div>
              <div class="detail-value">₺150</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Değerlendirme</div>
              <div class="detail-value">⭐ 4.8</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Tür</div>
              <div class="detail-value">Halı Saha</div>
            </div>
          </div>
          <div class="available-slots">
            <button class="slot-btn available" onclick="selectSlot(this, '17:00')">17:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '18:00')">18:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '19:00')">19:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '20:00')">20:00</button>
            <button class="slot-btn" disabled>21:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '22:00')">22:00</button>
          </div>
        </div>

        <div class="venue-card" onclick="selectVenue(this, 'Champions Halısaha', 180)">
          <div class="venue-header">
            <div class="venue-image">
              <span style="color: white; font-size: 1.5rem;">🏟️</span>
            </div>
            <div class="venue-info">
              <div class="venue-name">Champions Halısaha</div>
              <div class="venue-location">
                <span>📍</span>
                <span>Keçiören, Ankara (2.8 km)</span>
              </div>
            </div>
          </div>
          <div class="venue-details">
            <div class="detail-item">
              <div class="detail-label">Ücret/Saat</div>
              <div class="detail-value">₺180</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Değerlendirme</div>
              <div class="detail-value">⭐ 4.6</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Tür</div>
              <div class="detail-value">Halı Saha</div>
            </div>
          </div>
          <div class="available-slots">
            <button class="slot-btn" disabled>17:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '18:00')">18:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '19:00')">19:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '20:00')">20:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '21:00')">21:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '22:00')">22:00</button>
          </div>
        </div>

        <div class="venue-card" onclick="selectVenue(this, 'Elite Football Center', 200)">
          <div class="venue-header">
            <div class="venue-image">
              <span style="color: white; font-size: 1.5rem;">🏟️</span>
            </div>
            <div class="venue-info">
              <div class="venue-name">Elite Football Center</div>
              <div class="venue-location">
                <span>📍</span>
                <span>Mamak, Ankara (3.5 km)</span>
              </div>
            </div>
          </div>
          <div class="venue-details">
            <div class="detail-item">
              <div class="detail-label">Ücret/Saat</div>
              <div class="detail-value">₺200</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Değerlendirme</div>
              <div class="detail-value">⭐ 4.9</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Tür</div>
              <div class="detail-value">Halı Saha</div>
            </div>
          </div>
          <div class="available-slots">
            <button class="slot-btn available" onclick="selectSlot(this, '17:00')">17:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '18:00')">18:00</button>
            <button class="slot-btn" disabled>19:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '20:00')">20:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '21:00')">21:00</button>
            <button class="slot-btn available" onclick="selectSlot(this, '22:00')">22:00</button>
          </div>
        </div>
      </div>

      <!-- Booking Summary -->
      <div class="booking-summary" id="booking-summary">
        <div class="section-title">Rezervasyon Özeti</div>
        <div class="summary-item">
          <span class="summary-label">Saha:</span>
          <span class="summary-value" id="selected-venue">-</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Tarih:</span>
          <span class="summary-value" id="selected-date">-</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Saat:</span>
          <span class="summary-value" id="selected-time">-</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Oyuncu Sayısı:</span>
          <span class="summary-value" id="selected-players">-</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Toplam Ücret:</span>
          <span class="summary-value" id="total-price">-</span>
        </div>
      </div>

      <!-- Book Button -->
      <button class="book-btn" id="book-btn" onclick="makeBooking()" disabled>
        Rezervasyonu Tamamla
      </button>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <div class="nav-items">
        <a href="home.html" class="nav-item">
          <span>🏠</span>
          <span>Ana Sayfa</span>
        </a>
        <a href="matches.html" class="nav-item">
          <span>⚽</span>
          <span>Maçlar</span>
        </a>
        <a href="messages.html" class="nav-item">
          <span>💌</span>
          <span>Mesajlar</span>
        </a>
        <a href="profile.html" class="nav-item">
          <span>👤</span>
          <span>Profil</span>
        </a>
      </div>
    </div>

    <script>
      let selectedVenue = null;
      let selectedSlot = null;
      let selectedPrice = 0;
      let playerCount = 10;

      // Toast Notification System - Use centralized ToastManager
      // Removed showToast function - now using ToastManager.show() from js/toast.js

      // Booking Confirmation Modal
      function showBookingModal(venueData) {
        const overlay = document.createElement('div');
        overlay.className = 'modal-overlay';
        overlay.innerHTML = `
          <div class="booking-modal">
            <div class="modal-title">🎯 Rezervasyon Onayı</div>
            <div class="booking-summary">
              <div class="summary-item">
                <span>Saha:</span>
                <span>${venueData.venue}</span>
              </div>
              <div class="summary-item">
                <span>Tarih:</span>
                <span>${venueData.date}</span>
              </div>
              <div class="summary-item">
                <span>Saat:</span>
                <span>${venueData.time}</span>
              </div>
              <div class="summary-item">
                <span>Oyuncu:</span>
                <span>${venueData.players} kişi</span>
              </div>
              <div class="summary-item">
                <span>Toplam Ücret:</span>
                <span>₺${venueData.price}</span>
              </div>
            </div>
            <div class="modal-buttons">
              <button class="modal-btn secondary" onclick="closeBookingModal()">İptal</button>
              <button class="modal-btn primary" onclick="confirmBooking()">Onayla & Öde</button>
            </div>
          </div>
        `;
        
        document.body.appendChild(overlay);
        setTimeout(() => overlay.classList.add('show'), 100);
        window.currentBookingModal = overlay;
      }

      function closeBookingModal() {
        if (window.currentBookingModal) {
          window.currentBookingModal.classList.remove('show');
          setTimeout(() => {
            if (document.body.contains(window.currentBookingModal)) {
              document.body.removeChild(window.currentBookingModal);
            }
            window.currentBookingModal = null;
          }, 300);
        }
      }

      function confirmBooking() {
        // Rezervasyon verilerini hazırla
        const bookingData = {
          venueName: selectedVenue.name,
          venuePrice: selectedVenue.price,
          date: document.getElementById('booking-date').value,
          time: selectedSlot,
          playerCount: playerCount,
          totalPrice: selectedVenue.price,
          paymentMethod: 'credit_card',
          notes: `${playerCount} kişi ile ${selectedVenue.name} rezervasyonu`
        };

        // Rezervasyonu kaydet
        const result = PasliosData.createBooking(bookingData);
        
        closeBookingModal();
        
        if (result.success) {
          ToastManager.show('🎉 Rezervasyon başarılı! Ödeme işlemi tamamlandı.', 'success');
          
          // Reset form after successful booking
          setTimeout(() => {
            selectedVenue = null;
            selectedSlot = null;
            document.querySelectorAll('.venue-card').forEach(card => {
              card.classList.remove('selected');
            });
            document.querySelectorAll('.slot-btn').forEach(btn => {
              btn.classList.remove('selected');
            });
            updateBookingButton();
            ToastManager.show('📱 Rezervasyon onayı bildirimlerinize gönderildi.', 'info');
          }, 2000);
        } else {
          ToastManager.show(`❌ Rezervasyon hatası: ${result.message}`, 'error');
        }
      }

      function initMap() {
        ToastManager.show('🗺️ Demo modunda çalışıyorsunuz. Google Maps entegrasyonu yakında!', 'warning');
      }

      function changePlayerCount(change) {
        const newCount = playerCount + change;
        if (newCount >= 2 && newCount <= 22) {
          playerCount = newCount;
          document.getElementById('player-count').textContent = playerCount;
          updateSummary();
          
          // Show info toast
          if (change > 0) {
            ToastManager.show(`👥 Oyuncu sayısı ${playerCount} olarak güncellendi`, 'info');
          } else {
            ToastManager.show(`👥 Oyuncu sayısı ${playerCount} olarak güncellendi`, 'info');
          }
        } else {
          // Show warning for invalid counts
          if (newCount < 2) {
            ToastManager.show('⚠️ Minimum 2 oyuncu gereklidir!', 'warning');
          } else {
            ToastManager.show('⚠️ Maksimum 22 oyuncu olabilir!', 'warning');
          }
        }
        
        // Update button states
        document.getElementById('decrease-btn').disabled = playerCount <= 2;
        document.getElementById('increase-btn').disabled = playerCount >= 22;
      }

      function selectVenue(element, venueName, price) {
        // Remove previous selection
        document.querySelectorAll('.venue-card').forEach(card => {
          card.classList.remove('selected');
        });
        
        // Clear previous slot selection
        document.querySelectorAll('.slot-btn').forEach(btn => {
          btn.classList.remove('selected');
        });
        
        // Select venue
        element.classList.add('selected');
        selectedVenue = venueName;
        selectedPrice = price;
        selectedSlot = null; // Reset slot selection
        
        // Show success toast
        ToastManager.show(`⚽ ${venueName} seçildi! Şimdi saat seçimi yapabilirsiniz.`, 'success');
        
        updateBookingButton();
      }

      function selectSlot(element, time) {
        if (!selectedVenue) {
          ToastManager.show('⚠️ Önce bir saha seçmelisiniz!', 'warning');
          return;
        }
        
        // Remove previous slot selection
        document.querySelectorAll('.slot-btn').forEach(btn => {
          btn.classList.remove('selected');
        });
        
        // Select slot
        element.classList.add('selected');
        selectedSlot = time;
        
        // Show success toast
        ToastManager.show(`🕐 ${time} saati seçildi! Rezervasyon yapmaya hazırsınız.`, 'success');
        
        updateSummary();
      }

      function updateSummary() {
        const summary = document.getElementById('booking-summary');
        const bookBtn = document.getElementById('book-btn');
        
        if (selectedVenue && selectedSlot) {
          summary.classList.add('active');
          bookBtn.disabled = false;
          
          const date = document.getElementById('booking-date').value;
          const formattedDate = new Date(date).toLocaleDateString('tr-TR');
          
          document.getElementById('selected-venue').textContent = selectedVenue;
          document.getElementById('selected-date').textContent = formattedDate;
          document.getElementById('selected-time').textContent = selectedSlot;
          document.getElementById('selected-players').textContent = playerCount + ' kişi';
          document.getElementById('total-price').textContent = '₺' + selectedPrice;
        } else {
          summary.classList.remove('active');
          bookBtn.disabled = true;
        }
      }

      function updateBookingButton() {
        const bookBtn = document.getElementById('book-btn');
        if (selectedVenue && selectedSlot) {
          bookBtn.disabled = false;
          bookBtn.textContent = `Rezervasyon Yap - ₺${selectedPrice}`;
        } else {
          bookBtn.disabled = true;
          bookBtn.textContent = 'Saha ve Saat Seçin';
        }
      }

      function makeBooking() {
        if (!PasliosData.isLoggedIn()) {
          ToastManager.show('⚠️ Rezervasyon yapmak için giriş yapmalısınız!', 'warning');
          setTimeout(() => {
            window.location.href = 'index.html';
          }, 2000);
          return;
        }

        if (selectedVenue && selectedSlot) {
          const bookingData = {
            venue: selectedVenue,
            date: document.getElementById('selected-date').textContent,
            time: selectedSlot,
            players: playerCount,
            price: selectedPrice
          };
          
          // Rezervasyon verisini kaydet
          const currentUser = PasliosData.getCurrentUser();
          const booking = {
            id: Date.now(),
            userId: currentUser.id,
            venue: selectedVenue,
            date: document.getElementById('booking-date').value,
            time: selectedSlot,
            players: playerCount,
            totalPrice: selectedPrice,
            status: 'confirmed',
            createdAt: new Date().toISOString()
          };

          // Bookings verisini al ve kaydet
          let bookings = PasliosData.getData('bookings') || [];
          bookings.push(booking);
          PasliosData.setData('bookings', bookings);
          
          showBookingModal(bookingData);
        } else {
          ToastManager.show('⚠️ Lütfen saha ve saat seçimi yapınız!', 'warning');
        }
      }

      // Venue details data
      const venueData = {
        venue1: {
          name: 'Spor A Halısaha',
          address: 'Çankaya Mahallesi, No: 42, Ankara',
          rating: 4.8,
          reviewCount: 156,
          price: 150,
          features: ['Duş', 'Soyunma Odası', 'Otopark', 'Kafe', 'WiFi'],
          description: 'Modern tesislerle donatılmış kaliteli halısaha.'
        },
        venue2: {
          name: 'Champions Halısaha',
          address: 'Balgat Caddesi, No: 78, Ankara',
          rating: 4.6,
          reviewCount: 89,
          price: 180,
          features: ['Duş', 'Soyunma Odası', 'Otopark', 'Tribün'],
          description: 'Profesyonel standartlarda futsal sahası.'
        },
        venue3: {
          name: 'Elite Football Center',
          address: 'Kızılay Meydanı, No: 15, Ankara',
          rating: 4.9,
          reviewCount: 234,
          price: 200,
          features: ['Duş', 'Soyunma Odası', 'Otopark', 'Kafe', 'Klima', 'Ses Sistemi'],
          description: 'Premium kalitede spor kompleksi.'
        }
      };
      
      function initMap() {
        // Map açma simülasyonu
        const mapPins = document.getElementById('mapPins');
        const mapPlaceholder = document.querySelector('.map-placeholder');
        
        mapPlaceholder.style.display = 'none';
        mapPins.style.display = 'block';
      }
      
      function showVenueDetails(venueId, event) {
        event.stopPropagation();
        const venue = venueData[venueId];
        
        // Popup HTML'ini oluştur
        const popup = document.getElementById('venuePopup') || createVenuePopup();
        
        // Venue bilgilerini doldur
        popup.querySelector('.venue-name').textContent = venue.name;
        popup.querySelector('.venue-address').innerHTML = `📍 ${venue.address}`;
        popup.querySelector('.rating-text').textContent = venue.rating;
        popup.querySelector('.rating-count').textContent = `(${venue.reviewCount} değerlendirme)`;
        popup.querySelector('.price-value').textContent = `₺${venue.price}/saat`;
        
        // Yıldızları oluştur
        const starRating = popup.querySelector('.star-rating');
        starRating.innerHTML = '';
        for(let i = 1; i <= 5; i++) {
          const star = document.createElement('span');
          star.className = i <= Math.floor(venue.rating) ? 'star' : 'star empty';
          star.textContent = '★';
          starRating.appendChild(star);
        }
        
        // Özellikleri oluştur
        const featuresList = popup.querySelector('.features-list');
        featuresList.innerHTML = '';
        venue.features.forEach(feature => {
          const tag = document.createElement('span');
          tag.className = 'feature-tag';
          tag.textContent = feature;
          featuresList.appendChild(tag);
        });
        
        // Popup'ı göster
        document.getElementById('venuePopupOverlay').style.display = 'flex';
      }
      
      function createVenuePopup() {
        const overlay = document.createElement('div');
        overlay.id = 'venuePopupOverlay';
        overlay.className = 'venue-popup-overlay';
        overlay.onclick = closeVenuePopup;
        
        overlay.innerHTML = `
          <div class="venue-popup" onclick="event.stopPropagation()">
            <div class="popup-header">
              <button class="popup-close" onclick="closeVenuePopup()">✕</button>
              <div class="venue-icon">⚽</div>
            </div>
            <div class="popup-content">
              <h3 class="venue-name"></h3>
              <div class="venue-address"></div>
              
              <div class="rating-section">
                <div class="star-rating"></div>
                <span class="rating-text"></span>
                <span class="rating-count"></span>
              </div>
              
              <div class="venue-features">
                <div class="features-title">Özellikler</div>
                <div class="features-list"></div>
              </div>
              
              <div class="price-section">
                <span class="price-label">Saatlik Ücret</span>
                <span class="price-value"></span>
              </div>
              
              <div class="popup-actions">
                <button class="action-btn btn-secondary" onclick="closeVenuePopup()">Kapat</button>
                <button class="action-btn btn-primary" onclick="selectVenueFromPopup()">Rezervasyon Yap</button>
              </div>
            </div>
          </div>
        `;
        
        document.body.appendChild(overlay);
        return document.getElementById('venuePopup');
      }
      
      function closeVenuePopup() {
        const overlay = document.getElementById('venuePopupOverlay');
        if (overlay) {
          overlay.style.display = 'none';
          document.body.removeChild(overlay);
        }
      }
      
      function selectVenueFromPopup() {
        closeVenuePopup();
        ToastManager.show('⚽ Lütfen saha listesinden rezervasyon yapmak istediğiniz sahayı seçin', 'info');
        // Sayfa aşağı kaydır ve venue seçimini vurgula
        document.querySelector('.venue-list').scrollIntoView({ behavior: 'smooth' });
      }
      
      // ESC tuşu ile popup kapatma
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeVenuePopup();
          closeBookingModal();
        }
      });

      // Date input change handler
      document.addEventListener('DOMContentLoaded', function() {
        const dateInput = document.getElementById('booking-date');
        if (dateInput) {
          dateInput.addEventListener('change', function() {
            const selectedDate = new Date(this.value);
            const today = new Date();
            const formattedDate = selectedDate.toLocaleDateString('tr-TR', {
              weekday: 'long',
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            });
            
            if (selectedDate < today.setHours(0,0,0,0)) {
              ToastManager.show('⚠️ Geçmiş tarih seçilemez!', 'warning');
              this.value = new Date().toISOString().split('T')[0];
            } else {
              ToastManager.show(`📅 ${formattedDate} tarihi seçildi`, 'info');
              updateSummary();
            }
          });
        }

        // Initialize button states
        document.getElementById('decrease-btn').disabled = playerCount <= 2;
        document.getElementById('increase-btn').disabled = playerCount >= 22;
        updateBookingButton();
      });
    </script>

    <!-- Data Management Script -->
    <script src="js/data.js"></script>
    <!-- Toast Notifications -->
    <script src="js/toast.js"></script>
    
    <script>
      // Sayfa yüklendiğinde oturum kontrolü
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOMContentLoaded fired');
        console.log('PasliosData:', typeof PasliosData);
        
        // PasliosData'nın yüklenmesini bekle
        if (typeof PasliosData === 'undefined') {
          console.log('PasliosData not loaded yet, waiting...');
          setTimeout(() => {
            checkLogin();
          }, 100);
        } else {
          checkLogin();
        }
      });

      function checkLogin() {
        console.log('Checking login status...');
        const isLoggedIn = PasliosData.isLoggedIn();
        console.log('Is logged in:', isLoggedIn);
        
        if (!isLoggedIn) {
          console.log('User not logged in, redirecting...');
          ToastManager.show('⚠️ Bu sayfaya erişmek için giriş yapmalısınız!', 'warning');
          setTimeout(() => {
            window.location.href = 'index.html';
          }, 2000);
          return;
        }
        
        console.log('User is logged in, initializing page...');
        // Initialize booking page
        initializeBookingPage();
      }

      function initializeBookingPage() {
        // Initialize button states
        const decreaseBtn = document.getElementById('decrease-btn');
        const increaseBtn = document.getElementById('increase-btn');
        
        if (decreaseBtn && increaseBtn) {
          decreaseBtn.disabled = playerCount <= 2;
          increaseBtn.disabled = playerCount >= 22;
        }
        
        updateBookingButton();
      }
    </script>
  </body>
</html>