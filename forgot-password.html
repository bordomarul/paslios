<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Paslios - Şifre Sıfırlama">
    <link href="output.css" rel="stylesheet">`n    <link href="css/responsive.css" rel="stylesheet">
    <title>Paslios - Şifremi Unuttum</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
      }
      
      .container {
        width: 100%;
        max-width: 400px;
      }
      
      .card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 24px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        padding: 2rem;
        text-align: center;
      }
      
      .logo {
        width: 4rem;
        height: 4rem;
        background: linear-gradient(135deg, #10b981, #059669);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem auto;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }
      
      .logo svg {
        width: 2rem;
        height: 2rem;
        color: white;
      }
      
      .title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #374151;
        margin-bottom: 0.5rem;
      }
      
      .subtitle {
        color: #6b7280;
        margin-bottom: 2rem;
        line-height: 1.5;
      }
      
      .form-group {
        margin-bottom: 1.5rem;
        text-align: left;
      }
      
      .form-label {
        display: block;
        color: #374151;
        font-weight: 500;
        margin-bottom: 0.5rem;
      }
      
      .form-input {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.2s;
        background-color: #f9fafb;
      }
      
      .form-input:focus {
        outline: none;
        border-color: #10b981;
        background-color: white;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
      }
      
      .btn-primary {
        width: 100%;
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        padding: 0.875rem;
        border: none;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        margin-bottom: 1rem;
      }
      
      .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
      }
      
      .btn-primary:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }
      
      .back-link {
        color: #6b7280;
        text-decoration: none;
        font-size: 0.875rem;
        transition: color 0.2s;
      }
      
      .back-link:hover {
        color: #10b981;
      }
      
      .success-message {
        background: #d1fae5;
        border: 1px solid #a7f3d0;
        color: #065f46;
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        display: none;
      }
      
      .error-message {
        background: #fee2e2;
        border: 1px solid #fecaca;
        color: #991b1b;
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        display: none;
      }
      
      .icon {
        width: 1.25rem;
        height: 1.25rem;
        margin-right: 0.5rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="card">
        <div class="logo">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
        </div>
        
        <h1 class="title">Şifremi Unuttum</h1>
        <p class="subtitle">
          E-posta adresinizi girin, size şifre sıfırlama bağlantısı gönderelim.
        </p>
        
        <div id="successMessage" class="success-message">
          <strong>✅ Başarılı!</strong> Şifre sıfırlama bağlantısı e-posta adresinize gönderildi.
          <br><br>
          <small>E-postanızı kontrol edin ve bağlantıya tıklayın.</small>
        </div>
        
        <div id="errorMessage" class="error-message">
          <strong>❌ Hata!</strong> <span id="errorText">Bu e-posta adresi kayıtlı değil.</span>
        </div>
        
        <form id="forgotPasswordForm">
          <div class="form-group">
            <label for="email" class="form-label">E-posta Adresi</label>
            <input 
              type="email" 
              id="email" 
              name="email" 
              class="form-input" 
              placeholder="ornek@email.com"
              required
            >
          </div>
          
          <button type="submit" class="btn-primary" id="resetButton">
            Sıfırlama Bağlantısı Gönder
          </button>
        </form>
        
        <a href="/index" class="back-link">
          ← Giriş sayfasına dön
        </a>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('forgotPasswordForm');
        const emailInput = document.getElementById('email');
        const resetButton = document.getElementById('resetButton');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');

        form.addEventListener('submit', async function(e) {
          e.preventDefault();
          
          const email = emailInput.value.trim();
          
          if (!email) {
            showError('Lütfen e-posta adresinizi girin.');
            return;
          }
          
          if (!isValidEmail(email)) {
            showError('Lütfen geçerli bir e-posta adresi girin.');
            return;
          }
          
          // Butonu devre dışı bırak
          resetButton.disabled = true;
          resetButton.textContent = 'Gönderiliyor...';
          
          try {
            // Kullanıcı e-postasını kontrol et
            const users = JSON.parse(localStorage.getItem('paslios_users') || '[]');
            const userExists = users.find(user => user.email.toLowerCase() === email.toLowerCase());
            
            if (userExists) {
              // Şifre sıfırlama token'ı oluştur
              const resetToken = generateResetToken();
              const resetData = {
                email: email,
                token: resetToken,
                expires: Date.now() + (60 * 60 * 1000) // 1 saat
              };
              
              // Reset token'ı localStorage'a kaydet
              localStorage.setItem('paslios_reset_token', JSON.stringify(resetData));
              
              // Başarı mesajı göster
              showSuccess();
              
              // Simüle edilmiş e-posta bağlantısını aktif et
              const simulatedLink = document.getElementById('simulatedEmailLink');
              simulatedLink.onclick = function(e) {
                e.preventDefault();
                window.location.href = `reset-password.html?token=${resetToken}`;
              };
              
              // Formu temizle
              emailInput.value = '';
              
              // 3 saniye sonra giriş sayfasına yönlendir
              setTimeout(() => {
                window.location.href = 'index.html';
              }, 3000);
              
            } else {
              showError('Bu e-posta adresi kayıtlı değil.');
            }
            
          } catch (error) {
            showError('Bir hata oluştu. Lütfen tekrar deneyin.');
          } finally {
            // Butonu tekrar aktif et
            resetButton.disabled = false;
            resetButton.textContent = 'Sıfırlama Bağlantısı Gönder';
          }
        });
        
        function showSuccess() {
          successMessage.style.display = 'block';
          errorMessage.style.display = 'none';
        }
        
        function showError(message) {
          errorText.textContent = message;
          errorMessage.style.display = 'block';
          successMessage.style.display = 'none';
        }
        
        function isValidEmail(email) {
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          return emailRegex.test(email);
        }
        
        function generateResetToken() {
          return Math.random().toString(36).substring(2, 15) + 
                 Math.random().toString(36).substring(2, 15);
        }
      });
    </script>
  </body>
</html>